#!/bin/sh
branch="$(git symbolic-ref --short HEAD)"
if [ "$branch" = "main" ]; then
  echo "❌ Committing directly to 'main' is not allowed. Please use a feature branch."
  exit 1
fi

echo "Running Prettier..."
npm run format:check || {
  echo "❌ Prettier formatting issues found. Run 'npm run format' to fix."
  exit 1
}

echo "Running ESLint (includes console.log check)..."
npx eslint src --ext .ts